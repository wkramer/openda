<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>OpenDA: cta_resultwriter.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>cta_resultwriter.h File Reference</h1><code>#include &quot;<a class="el" href="cta__system_8h_source.html">cta_system.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="cta__handles_8h_source.html">cta_handles.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="cta__datatypes_8h_source.html">cta_datatypes.h</a>&quot;</code><br/>

<p><a href="cta__resultwriter_8h_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">CTAEXPORT int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cta__resultwriter_8h.html#aeb6b8d79d172b05532e570ab27425fa5">CTA_Resultwriter_putmessage</a> (int iDWriter, char *config, char *workingDir, char *message)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handle a string message send to the resultwriter.  <a href="#aeb6b8d79d172b05532e570ab27425fa5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">CTAEXPORT int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cta__resultwriter_8h.html#a8e7a5c0579e23eaeb13e7f52cd9b6538">CTA_Resultwriter_putvalue</a> (int idwriter, char *config, char *workingdir, char *id, int handle, int outputlevel, char *context, int iteration)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handle a string message send to the resultwriter.  <a href="#a8e7a5c0579e23eaeb13e7f52cd9b6538"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">CTAEXPORT int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cta__resultwriter_8h.html#a384b8e9151d222a89729d0a70caa2355">CTA_Resultwriter_putiterationreport</a> (int idwriter, char *config, char *workingDir, int iteration, double cost, int handle)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handle a string message send to the resultwriter.  <a href="#a384b8e9151d222a89729d0a70caa2355"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">CTAEXPORT int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cta__resultwriter_8h.html#aaa09d9ba8320a96374111c6f33911681">CTA_Resultwriter_free</a> (int idwriter)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Free a resultwriter (close output files etc).  <a href="#aaa09d9ba8320a96374111c6f33911681"></a><br/></td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="aaa09d9ba8320a96374111c6f33911681"></a><!-- doxytag: member="cta_resultwriter.h::CTA_Resultwriter_free" ref="aaa09d9ba8320a96374111c6f33911681" args="(int idwriter)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CTAEXPORT int CTA_Resultwriter_free </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>idwriter</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Free a resultwriter (close output files etc). </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>IDWriter</em>&nbsp;</td><td>I ID of this resultwriter (Counter of number of native result writers)</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>error status: CTA_OK if successful </dd></dl>

</div>
</div>
<a class="anchor" id="a384b8e9151d222a89729d0a70caa2355"></a><!-- doxytag: member="cta_resultwriter.h::CTA_Resultwriter_putiterationreport" ref="a384b8e9151d222a89729d0a70caa2355" args="(int idwriter, char *config, char *workingDir, int iteration, double cost, int handle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CTAEXPORT int CTA_Resultwriter_putiterationreport </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>idwriter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>workingDir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>iteration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>cost</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>handle</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Handle a string message send to the resultwriter. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>IDWriter</em>&nbsp;</td><td>I ID of this resultwriter (Counter of number of native result writers) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>config</em>&nbsp;</td><td>I Name of XML configuration file containting the function pointers and additional information </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>workingDir</em>&nbsp;</td><td>I Full path to working directory </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>iteration</em>&nbsp;</td><td>I Iteration number from which the resultwriter was called </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>cost</em>&nbsp;</td><td>I Value of cost function </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>handle</em>&nbsp;</td><td>I Handle (Vector or TreeVector) of the current parameters</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>error status: CTA_OK if successful </dd></dl>

</div>
</div>
<a class="anchor" id="aeb6b8d79d172b05532e570ab27425fa5"></a><!-- doxytag: member="cta_resultwriter.h::CTA_Resultwriter_putmessage" ref="aeb6b8d79d172b05532e570ab27425fa5" args="(int iDWriter, char *config, char *workingDir, char *message)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CTAEXPORT int CTA_Resultwriter_putmessage </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>iDWriter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>workingDir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>message</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Handle a string message send to the resultwriter. </p>
<p>OpenDA support the concept of resultwriters. The Data assimilation algorithm will presents intermediate results and information on the computations to the result writer. Each implementation of a resultwriter can then handle this data in its own way.</p>
<p>To implement an native resultwriter the following methods need to be implemented. Note: for explanation on variables see resultwriter function methods. All strings have a len_... containing the result of strlen (used for using c-strings in Fortran)</p>
<p>C:</p>
<p>void putmessage(int iDWriter, CTA_Tree config, char* workingDir, char* message, int *retval, int len_workingDir, int len_message);</p>
<p>void putvalue(int iDWriter, CTA_Tree config, char* workingDir, int id, int handle, int outputlevel, char* context, int iteration, int &amp;retval, len_workingDir, len_id, len_context);</p>
<p>void putiterationreport(int iDWriter, CTA_Tree config, char *workingDir, int iteration, double cost, CTA_Vector handle, int *retval, int len_workingDir);</p>
<p>void freewriter(int iDWriter);</p>
<p>Fortran 2003:</p>
<p>interface subroutine putmessage(iDWriter, config, workingDir, message, retval, &amp; len_workingDir, len_message) &amp; bind(C, NAME='putmessage') use iso_c_binding implicit none include 'cta_f90.inc'</p>
<p>integer(C_INT), VALUE iDWriter, config, len_workingDir, len_message integer(C_INT) retval character(kind=c_char) workingdir(*), message(*) end subroutine putmessage end interface</p>
<p>interface subroutine putvalue(iDWriter, config, workingDir, id, handle, &amp; outputlevel, context, iteration, retval, &amp; len_workingDir, len_id, len_context) &amp; bind(C, NAME='putvalue') use iso_c_binding implicit none include 'cta_f90.inc' integer(C_INT), VALUE iDWriter, config, handle, outputlevel, iteration, &amp; len_workingDir, len_id, len_context integer(C_INT) retval character(kind=c_char) workingdir(*), id(*), context(*)</p>
<p>end subroutine putvalue end interface</p>
<p>interface subroutine putiterationreport(iDWriter, config, workingDir, iteration, cost, &amp; handle, retval, len_workingDir) &amp; bind(C, NAME='putiterationreport') use iso_c_binding implicit none include 'cta_f90.inc' integer(C_INT), VALUE iDWriter, config, iteration, handle, len_workingDir real(C_DOUBLE), VALUE cost integer(C_INT) retval character(kind=c_char) workingdir(*) end subroutine putiterationreport end interface</p>
<p>interface subroutine freewriter(iDWriter) &amp; bind(C, NAME='freewriter') use iso_c_binding implicit none include 'cta_f90.inc' integer(C_INT), VALUE iDWriter end subroutine freewriter end interface</p>
<p>The resultwriter must have an xml-configuration file containing at least the following (additional field may be used for private usage by the implementation) Note name of library and funtion name must correspond to the user implementation.</p>
<p>&lt;?xml version="1.0" encoding="UTF-8"?&gt; &lt;openda_native xmlns:xi="http://www.w3.org/2001/XInclude"&gt; &lt;CTA_FUNCTION id="putvalue" name="putvalue" library="libresultwriter.so" function="putvalue"&gt; &lt;CTA_FUNCTION id="putmessage" name="putmessage" library="libresultwriter.so" function="putmessage"&gt; &lt;CTA_FUNCTION id="putiterationreport" name="putiterationreport" library="libresultwriter.so" function="putiterationreport"&gt; &lt;CTA_FUNCTION id="freewriter" name="freewriter" library="libresultwriter.so" function="freewriter"&gt; &lt;/openda_native&gt;</p>
<dl class="author"><dt><b>Author:</b></dt><dd>nils van velzen </dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>IDWriter</em>&nbsp;</td><td>I ID of this resultwriter (Counter of number of native result writers) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>config</em>&nbsp;</td><td>I Name of XML configuration file containting the function pointers and additional information </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>workingDir</em>&nbsp;</td><td>I Full path to working directory </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>message</em>&nbsp;</td><td>I Message send to resultwriter</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>error status: CTA_OK if successful </dd></dl>

</div>
</div>
<a class="anchor" id="a8e7a5c0579e23eaeb13e7f52cd9b6538"></a><!-- doxytag: member="cta_resultwriter.h::CTA_Resultwriter_putvalue" ref="a8e7a5c0579e23eaeb13e7f52cd9b6538" args="(int idwriter, char *config, char *workingdir, char *id, int handle, int outputlevel, char *context, int iteration)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CTAEXPORT int CTA_Resultwriter_putvalue </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>idwriter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>workingdir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>outputlevel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>iteration</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Handle a string message send to the resultwriter. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>IDWriter</em>&nbsp;</td><td>I ID of this resultwriter (Counter of number of native result writers) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>config</em>&nbsp;</td><td>I Name of XML configuration file containting the function pointers and additional information </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>workingDir</em>&nbsp;</td><td>I Full path to working directory </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>id</em>&nbsp;</td><td>I Name of the variable/array send to the resultwriter </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>handle</em>&nbsp;</td><td>I Handle (Vector or TreeVector) of variable </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>outputLevel</em>&nbsp;</td><td>I Selected output level (see opendabridge for possible values) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>context</em>&nbsp;</td><td>I Location from which the resultwriter was called </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>iteration</em>&nbsp;</td><td>I Iteration number from which the resultwriter was called</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>error status: CTA_OK if successful </dd></dl>

</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 4 Mar 2014 for OpenDA by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
